[phases.setup]
nixPkgs = ["python312", "chromium", "chromedriver"]

[phases.install]
cmds = [
  "curl -sS https://bootstrap.pypa.io/get-pip.py -o /tmp/get-pip.py",
  "python3 /tmp/get-pip.py --user",
  "export PATH=$HOME/.local/bin:$PATH",
  "pip3 install --upgrade pip setuptools wheel",
  "pip3 install -r requirements.txt",
  "export CHROME_BIN=$(which chromium)"
]

[phases.build]
cmds = []

[start]
cmd = "export CHROME_BIN=$(which chromium) && export PORT=${PORT:-5000} && python3 app.py"

